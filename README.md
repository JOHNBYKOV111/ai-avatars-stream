Система для получения полностью автоматизированного научного диалога между двумя виртуальными учёными в режиме реального времени. Система обладает многоуровневым функционалом: логика диалога и управление очередью работают напрямую через Python-менеджеры, а генерация осмысленных научных дискуссий обрабатывается GigaChat API и выдаёт сложную аналитику на основе промпт-инжиниринга. Проект охватывает все аспекты взаимодействия аватаров: генерацию текста, синтез речи, анимацию губ, управление сценой и аудио-маршрутизацию, включая обработку нестандартных ситуаций (пустые реплики, ошибки API, гендерные несоответствия).

Основной функционал:
Автоматический стрим с двумя AI-аватарами через интеграцию с VTube Studio и OBS.
Генерация научного диалога с помощью GigaChat API и кастомных промптов.
Синтез живой речи через SaluteSpeech с раздельными голосами для персонажей.
Маршрутизация аудио по отдельным виртуальным каналам (VAC) для каждого аватара.
Интуитивное управление через единый Python-скрипт (main.py), полностью автоматизирующий процесс.

ТЕСТОВОЕ ПОКРЫТИЕ AI AVATARS STREAM
Программа имеет объемное тестовое покрытие (205 тестов, 89%) , состоящее из:

Unit-тесты (модульные)	Тестирование отдельных компонентов: AudioRouter, DialogManager, GigaChatManager, TTSEngine, OBSController, PromptBuilder, Utils	87
Интеграционные тесты	Проверка взаимодействия между компонентами: GigaChat + DialogManager, DialogManager + TTS, TTS + AudioRouter	23
Тесты граничных случаев	Тестирование крайних значений: очень длинные реплики (2000+ символов), пустые строки, нулевая амплитуда аудио	15
Тесты обработки ошибок	Проверка поведения при сбоях: ошибки сети, недоступность API, таймауты, ошибки чтения файлов	18
Параметризованные тесты	Один тест с множеством входных данных (например, 20+ вариантов очистки текста)	12
Тесты конфигурации	Проверка загрузки YAML/JSON конфигов, валидация структуры agents_config.yaml	8
Тесты безопасности	Проверка защиты от деления на ноль, обработка исключений, валидация входных данных	10
Тесты форм и парсинга	Тестирование извлечения эмоций из текста, очистки тегов, парсинга JSON	9
Тесты логирования	Проверка записи логов, форматирования сообщений, уровней логирования	7
Тесты кэширования	Проверка кэширования аудиофайлов в TTSEngine	4
Тесты состояния (State tests)	Тестирование переходов между состояниями: инициализация → генерация → воспроизведение → завершение	6
Тесты гендерных правил	Проверка замены окончаний ("уверен" → "уверена"), фильтрации запрещённых слов ("дружище", "брат")	8
Тесты пустых реплик	Проверка обработки пустых ответов от GigaChat	5
Тесты восстановления (Recovery)	Проверка автоматического переключения на Silero при недоступности SaluteSpeech	3
Нагрузочные тесты (Stress tests)	Проверка длительной работы (20+ реплик), тест на утечки памяти	4
Тесты зависимостей	Проверка наличия всех необходимых Python-пакетов	1
ИТОГО	Всего тестов	205

Детализация по файлам:
Файл	Типы тестов	Кол-во
test_audio.py	Unit, обработка ошибок	6
test_audio_advanced.py	Unit, граничные случаи, обработка ошибок	8
test_audio_extra.py	Unit, параметризованные, кэширование	12
test_config.py	Конфигурация, парсинг	3
test_dialog.py	Unit, состояние	4
test_duration.py	Параметризованные	1
test_empty_replies.py	Пустые реплики, восстановление	7
test_gender_rules.py	Гендерные правила, безопасность	3
test_gigachat.py	Unit, обработка ошибок, безопасность	7
test_gigachat_extra.py	Интеграционные, восстановление	8
test_integration.py	Интеграционные	1
test_obs.py	Unit, обработка ошибок	7
test_obs_extra.py	Unit, состояние	5
test_prompt.py	Unit, парсинг, конфигурация	5
test_prompt_extra.py	Unit, параметризованные	3
test_recovery.py	Восстановление, обработка ошибок	2
test_requirements.py	Зависимости	1
test_stress.py	Нагрузочные, утечки памяти	2
test_tts.py	Unit, кэширование, обработка ошибок	6
test_tts_extra.py	Интеграционные, гендерные правила	7
test_utils.py	Unit, параметризованные, конфигурация, логирование, безопасность	25
test_utils_extra.py	Unit, конфигурация, обработка ошибок	10

Запуск проекта: 
Предварительные требования:
Подразумевается наличие у пользователя:

Python 3.13+
Virtual Audio Cable (для аудио-маршрутизации)
VTube Studio (для анимации аватаров)
OBS Studio 28.0+ (для стриминга)
Модели Live2D (поставляются с проектом)

Необходимая информация для клиентов:

Файл конфигурации: src/.env
Проект уже настроен на работу с:
Аудиоустройствами: Line 1 (ID 15) и Line 2 (ID 16)
OBS WebSocket: порт 4455, пароль r1lKjTNq0JtSqi69

Для активации AI-функционала введите свои данные в поля:

env
GigaChat API (обязательно для генерации диалога)
GIGACHAT_AUTH_KEY=ваш_ключ_в_base64_здесь
SaluteSpeech API (обязательно для синтеза речи)
SALUTE_AUTH_KEY=ваш_authorization_key_в_base64

Создание виртуального окружения

Windows
python -m venv venv
venv\Scripts\activate

Linux/Mac
python3 -m venv venv
source venv/bin/activate
Установка всех зависимостей

pip install -r requirements.txt

Файл requirements.txt содержит все необходимые библиотеки:

requests, python-dotenv — работа с API и конфигами
sounddevice, soundfile, numpy, scipy — аудио-обработка
torch, torchaudio — для Silero TTS (резервный движок)
obsws-python — управление OBS через WebSocket
pyyaml — работа с YAML-конфигами
pytest, pytest-cov, pytest-mock — тестирование

Запуск тестирования:

python -m pytest tests/ -v

Запуск с отчётом о покрытии
python -m pytest tests/ --cov=src --cov-report=term-missing

Проект полностью готов к работе.
